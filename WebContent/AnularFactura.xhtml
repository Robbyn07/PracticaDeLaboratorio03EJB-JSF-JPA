<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
<h:head>
    <title>Anular Factura</title>
</h:head>
<h:body>
    
    <h:form>
    	<h:commandButton value="Salir" action="#{anularFacturaControler.salir}"/>
    </h:form>
    
    <h:form>
    	<h:inputText id="ced" value="#{anularFacturaControler.cedula}" type="text"/>
    	<h:commandButton value="Crear Cliente" action="#{anularFacturaControler.buscarPorCedula}"  update="list:facturas"/>
    </h:form>
  	
  	<h:form>
    	<h:inputText id="od" value="#{anularFacturaControler.id}" type="text"/>
    	<h:commandButton value="Crear Cliente" action="#{anularFacturaControler.buscarPorId}"  update="list:facturas"/>
    </h:form>
    
    <h:form id="facturas">
    	<h:dataTable value="#{anularFacturaControler.cabeceras}" var="c" styleClass="tabla" headerClass="cabeceraTabla" rowClasses="filaPar,filaImpar">
   			<h:column>
   				<f:facet name="header" id="proid">CODIGO</f:facet>#{c.id}
   			</h:column>
   			<h:column>
   				<f:facet name="header" id="proid">FECHA</f:facet>#{c.fecha}
   			</h:column>
   			<h:column>
   				<f:facet name="header" id="proid">SUBTOTAL</f:facet>#{c.subtotal}
   			</h:column>
   			<h:column>
   				<f:facet name="header" id="proid">IVA</f:facet>#{c.iva}
   			</h:column>
   			<h:column>
   				<f:facet name="header" id="proid">TOTAL</f:facet>#{c.total}
   			</h:column>
	   		<h:column>
   				<f:facet name="header" id="proid">DETALLE</f:facet>
   				<h:commandButton value="Ver" action="#{anularFacturaControler.mostrarDetalles(c)}" update="list:detalles">
	    		</h:commandButton>
   			</h:column>
   			<h:column>
   				<f:facet name="header" id="proid">ANULAR</f:facet>
   				<h:commandButton value="Ver" action="#{anularFacturaControler.anularFactura(c)}" update="list:detalles">
	    		</h:commandButton>
   			</h:column>
   		</h:dataTable>
   		
   		<h:dataTable id="detalles" value="#{anularFacturaControler.detalles}" var="d" styleClass="tabla" headerClass="cabeceraTabla" rowClasses="filaPar,filaImpar">
   			<h:column>
   				<f:facet name="header" id="proid">Bodega</f:facet>#{d.producto.bodegas.get(0).nombre}
   			</h:column>
   			<h:column>
   				<f:facet name="header" id="proid">Producto</f:facet>#{d.producto.nombre}
   			</h:column>
   			<h:column>
   				<f:facet name="header" id="proid">Cantidad</f:facet>#{d.cantidad}
   			</h:column>
   			<h:column>
   				<f:facet name="header" id="proid">Total</f:facet>#{d.total}
   			</h:column>
   		</h:dataTable>
   		
    </h:form>
  	
</h:body>
</html>